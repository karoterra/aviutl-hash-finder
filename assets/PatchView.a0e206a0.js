import{A as N}from"./aviutlModuleRepository.b0d3a01c.js";import{d as P,w as S,r as n,c as h,o as U,i as I,a as x,b as d,u as b,e as _,f as V,F,g as m,h as C,j as L,t as A,k as R}from"./index.3bedfa10.js";class j{static getModules(o){const s=[],p=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{8}:(.*) \(([0-9a-fA-F]{64})\)/gm;let a;for(;(a=p.exec(o))!==null;)s.push({filename:a[1],sha256:a[2]});return s}}const Z=["href"],J=P({__name:"PatchView",async setup(B){let o,s;const p=([o,s]=S(()=>N.getInstance()),o=await o,s(),o),a=n(void 0),z=h(()=>a.value?a.value.name:"Drag'n'drop a patch.aul debug info file or"),k=["known","unknown"],i=n(k[0]),f=n([]),c=n([]),E=h(()=>i.value==="known"?f.value:c.value),M=n([{key:"originalFilename",sortable:!0},{key:"currentFilename",sortable:!0},{key:"name",sortable:!0},{key:"version",sortable:!0},{key:"build",sortable:!0},{key:"author",sortable:!0},{key:"url",sortable:!0},{key:"sha256",sortable:!0}]),T=n([{key:"filename",sortable:!0},{key:"sha256",sortable:!0}]),D=h(()=>i.value==="known"?M.value:T.value),y=n(),g=n(100);function w(){const r=y.value.getBoundingClientRect().y;g.value=window.innerHeight-r}return U(()=>{w(),window.addEventListener("resize",()=>{w()})}),I(a,async r=>{if(r){const l=await r.text();f.value.splice(0),c.value.splice(0);const v=c.value.concat(j.getModules(l));for(const u of v){const e=p.findBySha256(u.sha256);e?f.value.push({originalFilename:e.filename,currentFilename:u.filename,name:e.name,version:e.version,build:e.build,author:e.author,url:e.url,sha256:e.sha256}):c.value.push(u)}}}),(r,l)=>{const v=m("va-file-upload"),u=m("va-tab"),e=m("va-tabs"),H=m("va-data-table");return C(),x(F,null,[d(v,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value=t),dropzone:"",type:"single","hide-file-list":"","drop-zone-text":b(z),"upload-button-text":"Select file"},null,8,["modelValue","drop-zone-text"]),d(e,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value=t)},{tabs:_(()=>[(C(),x(F,null,L(k,t=>d(u,{key:t,name:t},{default:_(()=>[R(A(t),1)]),_:2},1032,["name"])),64))]),_:1},8,["modelValue"]),V("div",{ref_key:"tableElem",ref:y},[d(H,{items:b(E),columns:b(D),striped:"",height:g.value,"sticky-header":""},{"cell(url)":_(({value:t})=>[V("a",{href:t},A(t),9,Z)]),_:1},8,["items","columns","height"])],512)],64)}}});export{J as default};
